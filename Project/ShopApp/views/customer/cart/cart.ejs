<%- include('../../shared/includes/head', {pageTitle : "Cart" }) %>
    <link rel="stylesheet" href="/styles/cart.css">
    <script src="/scripts/cart-item-update.js" defer></script>
    </head>

    <body>
        <%- include("../../shared/includes/header") %>
            <main>
                <h1>Cart</h1>
                <ul id="cart-items">
                    <% for(const cartItem of locals.cart.items) {%>
                        <li>
                            <%- include("includes/cart-item",{item:cartItem}) %>
                        </li>
                        <% } %>
                </ul>
                <div id="cart-total">
                    <p>
                        Total :
                        <span id="cart-total-price">
                            <%= locals.cart.totalPrice %>
                        </span>
                    </p>
                    <% if (locals.isAuth) { %>
                        <form action="/orders" method="post">
                            <input type="hidden" name="_csrf" value="<%= locals.csrfToken %>">
                            <button class="btn">Buy</button>
                        </form>
                        <% } else { %>
                            <p>Login To Buy</p>
                            <% } %>


                </div>
            </main>
            <%- include("../../shared/includes/footer") %>